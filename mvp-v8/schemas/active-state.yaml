# @directive docs/explanation/decisions/2026-01-16-yaml-state.md
$schema: http://json-schema.org/draft-07/schema#
title: AgentOS Active State v2
type: object
required: [spec_version, state_id, updated_at, focus, frames]
properties:
  spec_version:
    type: string
    const: "agentos.active-state/v2"
  state_id: { type: string }
  updated_at: { type: string }
  focus:
    type: object
    required: [frame_id]
    properties:
      frame_id: { type: string }
      objective: { type: string }
      phase: { type: string, enum: ["discover", "plan", "execute", "review"] }
  frames:
    type: array
    items:
      type: object
      required: [id, title, summary, created_at]
      properties:
        id: { type: string }
        title: { type: string }
        summary: { type: string }
        created_at: { type: string }
        anchors: { type: array, items: { type: string } }
        links:
          type: array
          items:
            type: object
            required: [to, kind]
            properties:
              to: { type: string }
              kind: { type: string, enum: ["next", "branch", "resume"] }
              note: { type: string }
